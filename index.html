<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Airdrop & Mass Send Widget – Solana</title>
<style>
:root{--bg:#0b1220;--panel:#101826;--muted:#90a3b5;--text:#e8f0ff;--accent:#7cc4ff;--ok:#34d399;--warn:#f59e0b;--err:#ef4444}
*{box-sizing:border-box} body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,#0a0f1c,#0d1220 40%,#0d1426);color:var(--text)}
.container{max-width:980px;margin:24px auto;padding:16px}
.card{background:rgba(16,24,38,.8);border:1px solid rgba(124,196,255,.15);backdrop-filter: blur(6px);border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.4);padding:18px}
h1{font-size:24px;margin:0 0 6px} h2{font-size:16px;color:var(--muted);font-weight:500;margin:0 0 18px}
.row{display:flex;gap:12px;flex-wrap:wrap;margin:10px 0}
.col{flex:1;min-width:260px}
input,textarea,select,button{width:100%;padding:12px 12px;border-radius:12px;border:1px solid rgba(124,196,255,.18);background:#0e1624;color:var(--text);outline:none}
textarea{min-height:140px;resize:vertical}
label{display:block;font-size:13px;color:var(--muted);margin:10px 4px}
.muted{color:var(--muted)} .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}
.btn{cursor:pointer;border:1px solid rgba(124,196,255,.35)}
.btn:hover{filter:brightness(1.05)}
.tabs{display:flex;gap:8px;margin:12px 0 16px}
.tab{flex:1;text-align:center;padding:10px;border-radius:12px;border:1px solid rgba(124,196,255,.18);cursor:pointer;background:#0f1828}
.tab.active{background:#13233a;border-color:rgba(124,196,255,.4)}
.footer{font-size:12px;color:var(--muted);margin-top:18px;text-align:center}
.pill{display:inline-block;padding:2px 8px;border-radius:999px;font-size:12px;border:1px solid rgba(124,196,255,.25);background:#0b1526}
.hidden{display:none}
.small{font-size:12px}
</style>
</head>
<body>
<div class="container">
<div class="card">
<h1>Airdrop & Mass Send Widget</h1>
<h2>Solana Network • Connect your wallet and use the tools below. <span class="pill">Beta</span></h2>
<div class="row">
<div class="col">
<label>RPC (optional – leave blank for default)</label>
<input id="rpcUrl" placeholder="e.g. https://api.mainnet-beta.solana.com">
</div>
<div class="col">
<label>Site Treasury Wallet (receives SOL fees)</label>
<input id="treasury" class="mono" value="9Sexip38yhfeZD2EBDQkVRicZSY6eSK3cXxgDkgFVf8b" readonly />
</div>
<div class="col" style="max-width:220px">
<label>&nbsp;</label>
<button class="btn" id="connectBtn">Connect Wallet</button>
</div>
</div>
<div class="tabs">
<div class="tab active" data-tab="mass">Mass Send (SPL)</div>
<div class="tab" data-tab="rewards">Register Reward Airdrop</div>
<div class="tab" data-tab="claim">Claim Reward</div>
</div>
<!-- Panels -->
<div id="panel-mass">
<!-- Conteúdo Mass Send aqui -->
</div>
<div id="panel-rewards" class="hidden">
<!-- Conteúdo Rewards aqui -->
</div>
<div id="panel-claim" class="hidden">
<!-- Conteúdo Claim aqui -->
</div>
<div class="footer">
This widget runs 100% client-side. Test first on <span class="pill">devnet</span> before using on mainnet. You can embed this page via <span class="pill">&lt;iframe&gt;</span>.
</div>
</div>
</div>

<script type="module">
import * as web3 from "https://cdn.jsdelivr.net/npm/@solana/web3.js@1.95.4/lib/index.esm.js";
import {
  getAssociatedTokenAddress,
  createAssociatedTokenAccountInstruction,
  createTransferInstruction,
  TOKEN_PROGRAM_ID,
  ASSOCIATED_TOKEN_PROGRAM_ID
} from "https://cdn.jsdelivr.net/npm/@solana/spl-token@0.4.6/lib/index.esm.js";

const $ = (id)=>document.getElementById(id);
const log = (el,msg)=>{ el.textContent += `\n${new Date().toLocaleTimeString()} ─ ${msg}`; el.scrollTop = el.scrollHeight; };

let provider=null, connection=null, walletPubkey=null;
const DEFAULT_RPC="https://api.mainnet-beta.solana.com";

document.querySelectorAll('.tab').forEach(t=>t.addEventListener('click',()=>{
  document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
  t.classList.add('active');
  const target = t.getAttribute('data-tab');
  ["mass","rewards","claim"].forEach(id=>{
    $("panel-"+id).classList.toggle('hidden', id!==target);
  });
}));

$("connectBtn").onclick = async ()=>{
  try{
    provider=window.solana||window.phantom?.solana;
    if(!provider){ alert("Open with Phantom or another Solana-compatible wallet in your browser."); return; }
    const resp = await provider.connect();
    walletPubkey = new web3.PublicKey(resp.publicKey.toString());
    $("connectBtn").textContent=`Connected: ${walletPubkey.toString().slice(0,4)}...${walletPubkey.toString().slice(-4)}`;
    const rpc=$("rpcUrl").value.trim()||DEFAULT_RPC;
    connection = new web3.Connection(rpc,'confirmed');
  }catch(e){ alert("Failed to connect: "+e.message);}
};
</script>
</body>
</html>

